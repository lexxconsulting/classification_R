# classification_R
Credit Analyse Prediction using Azure and R

Summary

This experiment aims to create a predictive model for
classify the credit risk of customers of a banking institution.
description
This experiment aims to demonstrate the process of building a model
classification system to predict the risk of granting credit to customers of a
Bank. We will use a data set to build and train our model.

Dataset Information

The “German Credit Data” dataset will be used to build and
train the model in this experiment. This dataset is based on real data
generated by a researcher at the University of Hamburg, Germany.
The dataset contains 1000 observations and 20 variables, representing the
customer data, such as: current account status, credit history,
current credit amount, employability, residence, age, etc.
In our website bellow, you can find more detais about the Azure procedure.
website: www.lexxconsulting.com

Data Set Information:

Two datasets are provided. the original dataset, in the form provided by Prof. Hofmann, contains categorical/symbolic attributes and is in the file "german.data".

For algorithms that need numerical attributes, Strathclyde University produced the file "german.data-numeric". This file has been edited and several indicator variables added to make it suitable for algorithms which cannot cope with categorical variables. Several attributes that are ordered categorical (such as attribute 17) have been coded as integer. This was the form used by StatLog.

This dataset requires use of a cost matrix (see below)

..... 1 2
----------------------------
1 0 1
-----------------------
2 5 0

(1 = Good, 2 = Bad)

The rows represent the actual classification and the columns the predicted classification.

It is worse to class a customer as good when they are bad (5), than it is to class a customer as bad when they are good (1).


Attribute Information:

Attribute 1: (qualitative)
Status of existing checking account
A11 : ... < 0 DM
A12 : 0 <= ... < 200 DM
A13 : ... >= 200 DM / salary assignments for at least 1 year
A14 : no checking account

Attribute 2: (numerical)
Duration in month

Attribute 3: (qualitative)
Credit history
A30 : no credits taken/ all credits paid back duly
A31 : all credits at this bank paid back duly
A32 : existing credits paid back duly till now
A33 : delay in paying off in the past
A34 : critical account/ other credits existing (not at this bank)

Attribute 4: (qualitative)
Purpose
A40 : car (new)
A41 : car (used)
A42 : furniture/equipment
A43 : radio/television
A44 : domestic appliances
A45 : repairs
A46 : education
A47 : (vacation - does not exist?)
A48 : retraining
A49 : business
A410 : others

Attribute 5: (numerical)
Credit amount

Attibute 6: (qualitative)
Savings account/bonds
A61 : ... < 100 DM
A62 : 100 <= ... < 500 DM
A63 : 500 <= ... < 1000 DM
A64 : .. >= 1000 DM
A65 : unknown/ no savings account

Attribute 7: (qualitative)
Present employment since
A71 : unemployed
A72 : ... < 1 year
A73 : 1 <= ... < 4 years
A74 : 4 <= ... < 7 years
A75 : .. >= 7 years

Attribute 8: (numerical)
Installment rate in percentage of disposable income

Attribute 9: (qualitative)
Personal status and sex
A91 : male : divorced/separated
A92 : female : divorced/separated/married
A93 : male : single
A94 : male : married/widowed
A95 : female : single

Attribute 10: (qualitative)
Other debtors / guarantors
A101 : none
A102 : co-applicant
A103 : guarantor

Attribute 11: (numerical)
Present residence since

Attribute 12: (qualitative)
Property
A121 : real estate
A122 : if not A121 : building society savings agreement/ life insurance
A123 : if not A121/A122 : car or other, not in attribute 6
A124 : unknown / no property

Attribute 13: (numerical)
Age in years

Attribute 14: (qualitative)
Other installment plans
A141 : bank
A142 : stores
A143 : none

Attribute 15: (qualitative)
Housing
A151 : rent
A152 : own
A153 : for free

Attribute 16: (numerical)
Number of existing credits at this bank

Attribute 17: (qualitative)
Job
A171 : unemployed/ unskilled - non-resident
A172 : unskilled - resident
A173 : skilled employee / official
A174 : management/ self-employed/
highly qualified employee/ officer

Attribute 18: (numerical)
Number of people being liable to provide maintenance for

Attribute 19: (qualitative)
Telephone
A191 : none
A192 : yes, registered under the customers name

Attribute 20: (qualitative)
foreign worker
A201 : yes
A202 : no


Objective

The objective will be to predict the risk that each customer offers to the bank,
time to grant a credit line. The predictive model must be quite
necessary, as granting credit to a customer with a bad payment potential,
can bring a huge loss to the bank.

Lyfecycle

1. Data Transformation
2. Exploratory Analysis
3. Feature Selections
4. Generating a Predictive Model
5. Optimizing the Predictive Model
6. Analyzing the Predictive Models
The figure bellow show us the whole process using the Microsoft toll Azure Machine Learning Studio.




1. Data Transformation

In this step we will perform the following routines, considering the original repository dictionary from the original dataset:

• Label the columns
• Transform numerical variables into factors
• Transform numeric variables with a considerable number of unique variables into factors
• Quantize the target variable

The figure bellow show us all the named columns and the data type transformed.
(visit our web site to see the figure)

Balancing the data target
This process calls quantizing, when we use a statistical algorithm responsible for balancing the target variable, making the classes have the same sample.
See in figure1 bellow, before the balancing, the graph target samples had very different sizes and after balancing, we minimize this difference in the figure2.
The lack of balance makes the forecasting algorithm learn more about the target variable that has more samples than the other and this generates predictive levels and damages the model.

Figure1.
(visit our web site to see the figure)

Figure2.
(visit our web site to see the figure)

2. Descriptive Analysis

As the intuition is just a general approach to the process, we will not approach all descriptive graphics, just for example.
It is worth remembering that during this process, we can evaluate the variables and even exclude some by simple visual conclusion of correlation, that is, it is possible in some cases to also identify correlations between variables through descriptive analysis.



3. Feature Selections

Although there are models in Azure for this purpose called “Group Data into Bins”, we will use here the Random Forest algorithm with the R language, in order to return the most important variables.
A we can see bellow, the Random Forest algorithm selected the most important variables to be used in the predict model.


4. Generating a Predictive Model

For this process we use three predictive algorithms to train the model using Azure, they are:

• Class Bayes Point Mach
• Class Neural Network
• SVM

With the application of these three models, we can have more options to choose from and thus verify which model had better predictive performance.



5. Optimizing the Predictive Model

In this step we must consider all the possibilities that allow to optimize the models and that we use in our development process, the steps that we can consider are:
The business team can determine which variables are important
Select different variables
Insert external data for better standardization of historical internal data
Include new variables 
Use different algorithms
Quantization
Optimize the parameters of the algorithms
Trade-off between false positives and false negatives

6. Analyzing the Predictive Models

In this step we will evaluate all the results of precision, comparing the results generated by the three algorithms applied in Azure and by the algorithm using the language R, in order to identify which one will be chosen to be published.

The figure bellow shows the result between two models, where the "Score dataset" legend (blue color) represent  the "Class Bayes Point Mach" algorithm and the (red color) represent the Class Neural Networking.
(visit our web site to see the figure)


Bellow we can see the Class Neural Networking Model Final Result (Red color Graph)
(visit our web site to see the figure)

Bellow we can see the Class Bayes Point Mach Model Final Result (Blue color Graph)
(visit our web site to see the figure)



As we can see, the best model is Class Bayes Point Mach (Blue color Graph)
(visit our web site to see the figure)
Now we will compare  the model  Class Bayes Point Mach (Blue color Graph) with the another model SVM, to define which on is better.
Bellow we can see the SVM results and we can see that the model  Class Bayes Point Mach still having the best accuracy = 68,3%.


Now we will compare the Azure results with the Random Forest algorithm develop in R language program and as we can see, the Random Forest accurate = 68,62%




Final Conclusion

So, when we compare the accuracy results between Random Forest using R and the Class Bayes Point Mach using Azure, we conclude that we had a technical tie, both with 68%.
How we discussed in the topic 5, we can improve the accuracy, creating different scenarios.
After all these steps above, with the model selected, we only import the dataset with the same format into R or Azure and them we just need to publish and the model will return the prediction to make decision if the credit will be approved or not.
Although, we can display any credit analyze  information in real time for the credit sector to drive decision, using Power Bi visualization, as we have demonstrated in other articles.
These innovations technologies tolls together can support your business to drive decision for the next level. 

Benefits of Credit Analysis using Machine Learning 

Minimize the Credit Risk
Evaluate the cost of loss of sale versus cost of unpaid credit
Cost Reductions with Human Resource 
Increased sales through credit approval from customers previously denied
Increased sales and by adjusting the ideal credit limit
Improved cash flow
Opportunity cost reduction,etc.













































































